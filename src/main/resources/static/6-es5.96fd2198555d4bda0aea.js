function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{jkDv:function(t,e,r){"use strict";r.r(e);var n,a=r("ofXK"),o=r("/1cH"),i=r("bTqV"),c=r("Wp6s"),s=r("0IaG"),u=r("kmnG"),l=r("NFeN"),b=r("qFsG"),m=r("STbY"),d=r("M9IT"),f=r("Xa2L"),p=r("d3UM"),h=r("xHqg"),g=r("+0xr"),y=r("/t3+"),v=r("3Pt+"),S=r("KUt4"),R=r("tyNb"),C=r("Dh3D"),w=r("PSD3"),_=r.n(w),k=r("fXoL"),M=((n=function(){function t(e,r){_classCallCheck(this,t),this.dialogRef=e,this.data=r,r.oldName=r.name,r.oldUsername=r.username}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"swalOrderUpdate",value:function(){_.a.fire("U\u017esakovo duomenys atnaujinti.","","success")}}]),t}()).\u0275fac=function(t){return new(t||n)(k.Mb(s.g),k.Mb(s.a))},n.\u0275cmp=k.Gb({type:n,selectors:[["app-modal"]],decls:14,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","","placeholder","U\u017esakovas","cdkFocusInitial","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Prisjungimo ID","cdkFocusInitial","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"mat-dialog-close","click"]],template:function(t,e){1&t&&(k.Sb(0,"h3",0),k.zc(1),k.Rb(),k.Sb(2,"div",1),k.Sb(3,"mat-form-field"),k.Sb(4,"label"),k.Sb(5,"input",2),k.Zb("ngModelChange",(function(t){return e.data.name=t})),k.Rb(),k.Rb(),k.Rb(),k.Sb(6,"mat-form-field"),k.Sb(7,"label"),k.Sb(8,"input",3),k.Zb("ngModelChange",(function(t){return e.data.username=t})),k.Rb(),k.Rb(),k.Rb(),k.Rb(),k.Sb(9,"div",4),k.Sb(10,"button",5),k.Zb("click",(function(){return e.onNoClick()})),k.zc(11,"At\u0161aukti"),k.Rb(),k.Sb(12,"button",6),k.Zb("click",(function(){return e.swalOrderUpdate()})),k.zc(13,"I\u0161saugoti"),k.Rb(),k.Rb()),2&t&&(k.Bb(1),k.Bc("U\u017esakovas: ",e.data.oldName,""),k.Bb(4),k.jc("ngModel",e.data.name),k.Bb(3),k.jc("ngModel",e.data.username),k.Bb(4),k.jc("mat-dialog-close",e.data))},directives:[s.h,s.e,u.c,b.b,v.c,v.k,v.n,s.c,i.a,s.d],styles:["h3[_ngcontent-%COMP%]{text-align:center}div.mat-dialog-actions[_ngcontent-%COMP%]{justify-content:center;margin:auto}"]}),n);function x(t,e){return{validatorType:t,message:e}}function I(t){return x("required","You must enter a ".concat(t))}function O(t){return x("minlength","Must be at least ".concat(t," characters long"))}function A(t){return x("maxlength","Must be at most ".concat(t," characters long"))}var P=r("HyEY");function T(t,e){if(1&t&&(k.Sb(0,"mat-error"),k.zc(1),k.Rb()),2&t){var r=k.dc();k.Bb(1),k.Ac(r.getError("name"))}}function j(t,e){if(1&t&&(k.Sb(0,"mat-error"),k.zc(1),k.Rb()),2&t){var r=k.dc();k.Bb(1),k.Ac(r.getError("username"))}}function z(t,e){if(1&t&&(k.Sb(0,"mat-error"),k.zc(1),k.Rb()),2&t){var r=k.dc();k.Bb(1),k.Ac(r.getError("password"))}}function B(t,e){1&t&&k.Nb(0,"mat-spinner",11)}function D(t,e){if(1&t&&(k.Sb(0,"p",12),k.zc(1),k.Rb()),2&t){var r=k.dc();k.Bb(1),k.Ac(r.error)}}var F,E=((F=function(){function t(e,r,n,a,o){_classCallCheck(this,t),this.api=e,this.router=r,this.formBuilder=n,this.dialogRef=a,this.loading=!1,this.error="",this.formErrors={name:[I("name"),x("pattern","Can contain only uppercase lowercase letters and numbers"),O(3),A(50)],username:[I("username"),x("username","Must be a valid username")],password:[I("password"),O(8),A(50)]},this.userForm=n.group({name:["",[v.p.required,v.p.minLength(3),v.p.maxLength(50),v.p.pattern(/^[A-Z0-9a-z]+$/)]],username:["",[v.p.required]],password:["",[v.p.required,v.p.minLength(8),v.p.maxLength(50),v.p.pattern(/^[A-Z0-9a-z]+$/)]],role:["user",[v.p.required,v.p.minLength(3),v.p.maxLength(50),v.p.pattern(/^[A-Z0-9a-z]+$/)]]}),o&&(this.onConfirm=o.onConfirm,o.user&&(this.user=o.user,this.userForm.setValue({name:this.user.name,username:this.user.username,password:"",role:this.user.role})))}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"getError",value:function(t){var e,r=_createForOfIteratorHelper(this.formErrors[t]);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(this.userForm.controls[t].hasError(n.validatorType))return n.message}}catch(a){r.e(a)}finally{r.f()}return""}},{key:"errorResponseHandler",value:function(t){var e,r;this.loading=!1,t.error.validationErrors?(e=this.formErrors,r=this.userForm,Object.entries(t.error.validationErrors).forEach((function(t){var n=_slicedToArray(t,2),a=n[0],o=n[1],i=e[a].find((function(t){return"backend"===t.validatorType}));i?i.message=o[0]:e[a].push({validatorType:"backend",message:o[0]});var c=Object.assign({},r.controls[a].errors);c.backend=!0,r.controls[a].setErrors(c)}))):this.error="A network error occurred"}},{key:"submit",value:function(){var t=this;this.error="","VALID"===this.userForm.status&&(this.loading=!0,(this.user?this.api.put("/lei/users",this.userForm.getRawValue()):this.api.post("/lei/users",this.userForm.getRawValue())).subscribe((function(e){t.onConfirm&&t.onConfirm(e),t.dialogRef.close(),t.loading=!1}),this.errorResponseHandler.bind(this)))}}]),t}()).\u0275fac=function(t){return new(t||F)(k.Mb(P.a),k.Mb(R.a),k.Mb(v.d),k.Mb(s.g),k.Mb(s.a))},F.\u0275cmp=k.Gb({type:F,selectors:[["app-form"]],decls:28,vars:6,consts:[[1,"flex-column",2,"margin","50px",3,"formGroup","ngSubmit"],["appearance","standard"],["matInput","","formControlName","name"],[4,"ngIf"],["matInput","","formControlName","username"],["matInput","","type","password","formControlName","password"],["mat-stroked-button","","color","primary","type","submit"],[2,"display","flex","align-items","center","justify-content","center"],[2,"margin-right","5px"],["diameter","20",4,"ngIf"],["class","mat-error",4,"ngIf"],["diameter","20"],[1,"mat-error"]],template:function(t,e){1&t&&(k.Sb(0,"form",0),k.Zb("ngSubmit",(function(){return e.submit()})),k.Sb(1,"mat-form-field",1),k.Sb(2,"mat-label"),k.zc(3,"Name"),k.Rb(),k.Nb(4,"input",2),k.yc(5,T,2,1,"mat-error",3),k.Sb(6,"mat-hint"),k.zc(7,"Required"),k.Rb(),k.Rb(),k.Sb(8,"mat-form-field",1),k.Nb(9,"input",4),k.Sb(10,"mat-label"),k.zc(11,"Username"),k.Rb(),k.yc(12,j,2,1,"mat-error",3),k.Sb(13,"mat-hint"),k.zc(14,"Required"),k.Rb(),k.Rb(),k.Sb(15,"mat-form-field",1),k.Sb(16,"mat-label"),k.zc(17,"Password"),k.Rb(),k.Nb(18,"input",5),k.yc(19,z,2,1,"mat-error",3),k.Sb(20,"mat-hint"),k.zc(21,"Required"),k.Rb(),k.Rb(),k.Sb(22,"button",6),k.Sb(23,"span",7),k.Sb(24,"span",8),k.zc(25,"SUBMIT"),k.Rb(),k.yc(26,B,1,0,"mat-spinner",9),k.Rb(),k.Rb(),k.Rb(),k.yc(27,D,2,1,"p",10)),2&t&&(k.jc("formGroup",e.userForm),k.Bb(5),k.jc("ngIf",e.userForm.controls.name.invalid),k.Bb(7),k.jc("ngIf",e.userForm.controls.username.invalid),k.Bb(7),k.jc("ngIf",e.userForm.controls.password.invalid),k.Bb(7),k.jc("ngIf",e.loading),k.Bb(1),k.jc("ngIf",e.error))},directives:[v.q,v.l,v.f,u.c,u.g,b.b,v.c,v.k,v.e,a.l,u.f,i.a,u.b,f.b],styles:[".mat-card[_ngcontent-%COMP%]{width:100%;max-width:640px;min-width:380px;margin-top:20px;padding:50px}.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-column[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:0}.flex-column[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{margin-top:40px}.flex-row[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row}.flex-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1;margin-right:20px}.flex-row[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{margin-right:0}h1[_ngcontent-%COMP%]{margin-bottom:0}h1[_ngcontent-%COMP%], p.mat-error[_ngcontent-%COMP%]{text-align:center}p.mat-error[_ngcontent-%COMP%]{margin:5px 0 0;font-size:small}"]}),F);function N(t,e){1&t&&(k.Sb(0,"th",14),k.zc(1," Nr."),k.Rb())}function U(t,e){if(1&t&&(k.Sb(0,"td",15),k.zc(1),k.Rb()),2&t){var r=e.index;k.Bb(1),k.Bc(" ",r+1," ")}}function L(t,e){1&t&&(k.Sb(0,"th",14),k.zc(1," U\u017esakovas"),k.Rb())}function q(t,e){if(1&t&&(k.Sb(0,"td",15),k.zc(1),k.Rb()),2&t){var r=e.$implicit;k.Bb(1),k.Bc(" ",r.name," ")}}function H(t,e){1&t&&(k.Sb(0,"th",14),k.zc(1," Prisijungimo ID"),k.Rb())}function Z(t,e){if(1&t&&(k.Sb(0,"td",15),k.zc(1),k.Rb()),2&t){var r=e.$implicit;k.Bb(1),k.Bc(" ",r.username," ")}}function G(t,e){1&t&&k.Nb(0,"th",14)}function $(t,e){if(1&t){var r=k.Tb();k.Sb(0,"td",15),k.Sb(1,"button",16),k.Sb(2,"mat-icon"),k.zc(3,"more_vert"),k.Rb(),k.Rb(),k.Sb(4,"mat-menu",null,17),k.Sb(6,"button",18),k.Zb("click",(function(){k.qc(r);var t=e.$implicit;return k.dc().openDialog(t)})),k.Sb(7,"mat-icon"),k.zc(8,"edit"),k.Rb(),k.Sb(9,"span"),k.zc(10,"Redaguoti"),k.Rb(),k.Rb(),k.Sb(11,"button",18),k.Zb("click",(function(){k.qc(r);var t=e.$implicit;return k.dc().delete(t.id)})),k.Sb(12,"mat-icon"),k.zc(13,"delete"),k.Rb(),k.Sb(14,"span"),k.zc(15,"I\u0161trinti"),k.Rb(),k.Rb(),k.Rb(),k.Rb()}if(2&t){var n=k.nc(5);k.Bb(1),k.jc("matMenuTriggerFor",n)}}function J(t,e){1&t&&k.Nb(0,"tr",19)}function V(t,e){1&t&&k.Nb(0,"tr",20)}var Q,W,K=[{path:"",component:(Q=function(){function t(e,r){_classCallCheck(this,t),this.api=e,this.dialog=r,this.displayedColumns=["no","name","username","actions"],this.users=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.getUsers(),this.dataSource=new g.k,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"getUsers",value:function(){var t=this;this.api.get("/lei/users").subscribe((function(e){return t.dataSource.data=e.filter((function(t){return"admin"!==t.name}))}))}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"delete",value:function(t){var e=this;this.api.delete("/lei/users/".concat(t)).subscribe((function(){return e.users=e.users.filter((function(e){return e.id!==t}))})),this.dataSource.data=[],setTimeout((function(){return e.getUsers()}),1e3),_.a.fire("U\u017esakovas i\u0161trintas.","","success")}},{key:"openDialog",value:function(t){var e=this;this.dialog.open(M,{width:"250px",data:{id:t?t.id:null,name:t?t.name:null,username:t?t.username:null}}).afterClosed().subscribe((function(r){r&&e.api.post("/lei/users",r).subscribe((function(r){var n=e.users.find((function(e){return e.id===t.id}));n?(n.name=r.name,n.username=r.username):e.users=[].concat(_toConsumableArray(e.users),[t])})),e.dataSource.data=[],setTimeout((function(){return e.getUsers()}),1e3)}))}},{key:"showRegisterDialog",value:function(){this.dialog.open(E)}}]),t}(),Q.\u0275fac=function(t){return new(t||Q)(k.Mb(P.a),k.Mb(s.b))},Q.\u0275cmp=k.Gb({type:Q,selectors:[["app-list"]],viewQuery:function(t,e){var r;1&t&&(k.uc(d.a,!0),k.uc(C.a,!0)),2&t&&(k.mc(r=k.ac())&&(e.paginator=r.first),k.mc(r=k.ac())&&(e.sort=r.first))},decls:25,vars:3,consts:[["matInput","","placeholder","Filtruoti",3,"keyup"],["mat-table","","matTableExporter","",1,"mat-elevation-z8",3,"dataSource"],["exporter","matTableExporter"],["matColumnDef","no"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","username"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"footer"],["color","primary"],["mat-stroked-button","","color","white",2,"width","100%",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(k.Sb(0,"h3"),k.zc(1,"U\u017esakovai"),k.Rb(),k.Sb(2,"div"),k.Sb(3,"mat-form-field"),k.Sb(4,"input",0),k.Zb("keyup",(function(t){return e.applyFilter(t.target.value)})),k.Rb(),k.Rb(),k.Sb(5,"table",1,2),k.Qb(7,3),k.yc(8,N,2,0,"th",4),k.yc(9,U,2,1,"td",5),k.Pb(),k.Qb(10,6),k.yc(11,L,2,0,"th",4),k.yc(12,q,2,1,"td",5),k.Pb(),k.Qb(13,7),k.yc(14,H,2,0,"th",4),k.yc(15,Z,2,1,"td",5),k.Pb(),k.Qb(16,8),k.yc(17,G,1,0,"th",4),k.yc(18,$,16,1,"td",5),k.Pb(),k.yc(19,J,1,0,"tr",9),k.yc(20,V,1,0,"tr",10),k.Rb(),k.Sb(21,"div",11),k.Sb(22,"mat-toolbar",12),k.Sb(23,"button",13),k.Zb("click",(function(){return e.showRegisterDialog()})),k.zc(24," REGISTRUOTI NAUJ\u0104 VARTOTOJ\u0104 "),k.Rb(),k.Rb(),k.Rb(),k.Rb()),2&t&&(k.Bb(5),k.jc("dataSource",e.dataSource),k.Bb(14),k.jc("matHeaderRowDef",e.displayedColumns),k.Bb(1),k.jc("matRowDefColumns",e.displayedColumns))},directives:[u.c,b.b,g.j,S.a,g.c,g.e,g.b,g.g,g.i,y.a,i.a,g.d,g.a,m.c,l.a,m.d,m.a,g.f,g.h],styles:["h3[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{margin:auto;max-width:1500px;width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:10px}.mat-row[_ngcontent-%COMP%]:hover{background-color:#d3d3d3}.footer[_ngcontent-%COMP%]{position:fixed;left:0;bottom:0;width:100%;background-color:red;color:#fff;text-align:center}mat-form-field[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative}"]}),Q)}],X=((W=function t(){_classCallCheck(this,t)}).\u0275mod=k.Kb({type:W}),W.\u0275inj=k.Jb({factory:function(t){return new(t||W)},imports:[[R.c.forChild(K)],R.c]}),W),Y=r("Egam"),tt=r("wS5z");r.d(e,"AdminModule",(function(){return rt}));var et,rt=((et=function t(){_classCallCheck(this,t)}).\u0275mod=k.Kb({type:et}),et.\u0275inj=k.Jb({factory:function(t){return new(t||et)},imports:[[a.c,X,c.d,u.e,v.o,f.a,b.c,i.b,p.b,s.f,m.b,l.b,v.g,h.a,g.l,d.c,o.a,Y.a,S.b,y.b,tt.SystemModule]]}),et)}}]);